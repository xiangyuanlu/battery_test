(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-651c514e"],{"0a80":function(e,t,s){"use strict";var i=s("6266");s.n(i).a},6266:function(e,t,s){},cbae:function(e,t,s){"use strict";s.r(t),s("96cf");var i,n,a=s("3b8d"),r=(s("7f7f"),s("aef6"),{name:"reduction-file-box",data:function(){return{loading:!1,file:null,progress:0,status:1,disabled:!1,timer:null}},methods:{fileChange:function(e){var t,s=e.target.files;if(s&&0<s.length){if(!(t=s[0]).name.endsWith(".tgz"))return this.$message.error(this.$t("selectErrorFile")),void(this.$refs.input.value="");if(20971520<t.size)return this.$message.error(this.$t("fileGT20MBTips")),void(this.$refs.input.value="");this.file=t}},handleUpload:(n=Object(a.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.file){e.next=3;break}return this.$message({type:"warning",message:this.$t("pleaseSelectFile")}),e.abrupt("return");case 3:return this.loading=!0,(t=new FormData).append("system_backup",this.file),e.next=8,this.$store.dispatch("system/systemImport",t);case 8:e.sent?(this.loading=!1,this.disabled=!0,this.$message({type:"success",message:this.$t("restoreSuccessful")}),this.handleSuccess()):(this.loading=!1,this.status=2,this.file=null,this.$refs.input.value="",this.$message({type:"error",message:this.$t("restoreFailed")}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),handleConfirm:(i=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)}),handleCancel:function(){this.$emit("cancel")},handleSuccess:function(){this.$emit("confirm")},handleOut:function(){this.$emit("cancel")}}}),l=(s("0a80"),s("2877")),c=Object(l.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"reduction-file-box"},[s("div",{staticClass:"content"},[s("div",{staticClass:"label"},[e._v(e._s(e.$t("setFile")))]),s("div",{staticClass:"select-file"},[s("input",{ref:"input",attrs:{type:"file",disabled:e.disabled,accept:".tgz"},on:{change:e.fileChange}}),s("div",{staticStyle:{color:"red","margin-top":"12px"}},[e._v(e._s(e.$t("onlyTgzAnd20M")))])])]),s("div",{staticClass:"btn"},[1===e.status||2===e.status?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v(e._s(e.$t("uploadFile")))]):e._e(),1===e.status?s("el-button",{attrs:{size:"small",type:"default"},on:{click:e.handleCancel}},[e._v(e._s(e.$t("cancel")))]):e._e(),2===e.status?s("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.handleOut}},[e._v(e._s(e.$t("exit")))]):e._e()],1)])}),[],!1,null,null,null);t.default=c.exports}}]);